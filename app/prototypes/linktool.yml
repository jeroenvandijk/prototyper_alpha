models:
  customer:
    associations:
    - has_many: products
    attributes:
    - name: string

  product:
    associations:
    - belongs_to: customer
    - has_many: orders
    # - has_and_belongs_to_many: link_partners
    attributes:
    - name: string
    
  order:
    concerned_with: attributes
    associations:
      - belongs_to: product
      
      - has_many: competitor_searches
        as: searchable
        class_name: Search

      - has_many: order_competitor_members
      - has_many: competitors
        through: :order_competitor_members
        
      - has_many: link_partner_searches
        as: searchable
        class_name: Search
        
      - has_many: link_partner_order_members
      - has_many: link_partners
        through: link_partner_order_members
        
    attributes:
      - query: string
      - language: string
      - region: string
      - strict_language: boolean
      - scraping_started: boolean
      - scraping_done: boolean
      - link_partners_per_competitor: integer
      - offset_link_partners: integer
      
  competitor:
    associations:
      - has_many: order_competitor_members
      - has_many: orders
        through: order_competitor_members
    attributes:
      - domain: domain
      - title: string
      - description: text

  order_competitor_member:
    associations:
    - belongs_to: order
    - belongs_to: competitor
    
  link_partner:
    concerned_with: attributes
    associations: 
      - has_and_belongs_to_many: competitors
      - has_and_belongs_to_many: products
      - has_many: link_partner_order_members
      - has_many: orders
        through: link_partner_order_members
    attributes: 
    - domain: url
    - title: string
    - description: text
    - page_rank: integer
  
  link_partner_order_member:
    options: 
      paginate: true
      per_page: 10
    associations:
      - belongs_to: link_partner
      - belongs_to: order
    attributes:
      - selected: boolean

  blacklist:
    attributes:
    - domain: url
    
  search:
    concerned_with: attributes
    associations:
      - belongs_to: searchable
        polymorphic: true
      # - has_many: results

    attributes:
      - searchable_type: string
      - query: string
      - language: string
      - region: string
      - strict_language: boolean
      - limit: integer
      - done: boolean
      - deep_hits: integer
      - total_hits: integer
      
  # result:
  #   associations:
  #     - belongs_to: search
  #   attributes:
  #     - title: string
  #     - dispurl: url
  #     - clickurl: url
  #     - date: date
  #     - abstract: text
  #     - size: integer
  #     - url: url
      
